{
  "updatedAt": "2026-01-07T19:32:25.744Z",
  "createdAt": "2026-01-07T19:10:51.391Z",
  "id": "ZMwPg8lbbl6VRCZ5",
  "name": "WhatsApp AI Assistant - 24/7 Business Bot",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "whatsapp-webhook",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "5f38b324-a73a-4f4d-a39d-288565669cc8",
      "name": "WhatsApp Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -2976,
        848
      ],
      "webhookId": "da0b98ed-1565-4099-81bf-27a6f064d745"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "a28a66db-226f-4489-a27b-f7bc07d560a4",
      "name": "Fetch Customer History",
      "type": "n8n-nodes-base.mongoDb",
      "typeVersion": 1.2,
      "position": [
        -2752,
        848
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "chatInput",
              "value": "={{ $json.body.text }}",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "sessionId",
              "value": "={{ $json.body.from }}",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "customerPhone",
              "value": "={{ $json.body.from }}",
              "type": "string"
            },
            {
              "id": "id-4",
              "name": "customerHistory",
              "value": "={{ JSON.stringify($('Fetch Customer History').item.json) }}",
              "type": "object"
            },
            {
              "id": "id-5",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "7978b467-4bdf-41d2-8b37-f5baada4e69f",
      "name": "Build Context Object",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2528,
        848
      ]
    },
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are an intent classifier for a customer service chatbot. Analyze the user message and classify it into one of these categories: FAQ, Booking, Support, Complaint, Pricing, or Human_Needed. Consider the customer history provided in context. Output your classification in the structured format."
        }
      },
      "id": "f41361c3-e0da-4f7c-b887-278fb36aad8c",
      "name": "Intent Classifier",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -2304,
        848
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "f419b5f2-9804-4c98-8ea8-88c3e97aa38d",
      "name": "OpenAI Model - Classifier",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -2288,
        1072
      ]
    },
    {
      "parameters": {},
      "id": "4c8c466e-5d3b-401a-80fe-c8cb20033d8e",
      "name": "Conversation Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -784,
        176
      ]
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"intent\": \"FAQ\",\n  \"confidence\": 0.95,\n  \"reasoning\": \"User is asking about business hours\"\n}"
      },
      "id": "ed18a5e6-d636-43ea-abcc-6f168bf51f6f",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -2160,
        1072
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "FAQ",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "FAQ"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "Booking",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Booking"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "Support",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Support"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "Complaint",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Complaint"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "Pricing",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Pricing"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict"
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.intent }}",
                    "rightValue": "Human_Needed",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Human Needed"
            }
          ]
        },
        "options": {}
      },
      "id": "8c447aa4-0ca0-470b-85a0-7648f8937d74",
      "name": "Route by Intent",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -1952,
        784
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Build Context Object').item.json.chatInput }}",
        "options": {
          "systemMessage": "You are a helpful FAQ assistant. Answer common questions about our business, services, hours, and policies. Be concise and friendly. Use the customer history if relevant."
        }
      },
      "id": "1fd87374-a6f7-46fb-9e5f-1b4bfff136bb",
      "name": "FAQ Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -800,
        -48
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "8c6341fa-ad86-4f4e-b475-5b4e980d77d0",
      "name": "OpenAI Model - FAQ",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -656,
        176
      ]
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "returnAll": true,
        "timeMin": "={{ $now.toISO() }}",
        "timeMax": "={{ $now.plus(30, 'days').toISO() }}",
        "options": {}
      },
      "id": "8acc944a-d01e-49ab-93d7-b5fda740a0a8",
      "name": "Check Calendar Availability",
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        -1376,
        352
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Build Context Object').item.json.chatInput }}",
        "options": {
          "systemMessage": "You are a booking assistant. Help customers schedule appointments based on available calendar slots. Collect necessary information (date, time, service type, contact details). Be professional and confirm all details before finalizing."
        }
      },
      "id": "81851971-64ba-4377-a909-a866f37945c8",
      "name": "Booking Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -1152,
        352
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "fe7301a7-dd8e-4db3-b840-506f25838d23",
      "name": "OpenAI Model - Booking",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -1072,
        576
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "response",
              "value": "={{ $('Booking Agent').item.json.output }}",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "responseType",
              "value": "booking",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "00235829-3fc9-4060-b0e8-aa84eb43f1bf",
      "name": "Format Booking Confirmation",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -736,
        352
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Build Context Object').item.json.chatInput }}",
        "options": {
          "systemMessage": "You are a technical support agent. Help customers troubleshoot issues, provide solutions, and guide them through processes. Be patient and thorough. If you successfully resolve the issue, end your response with [RESOLVED]. If the issue requires escalation, end with [ESCALATE]."
        }
      },
      "id": "fe9cc2b2-6bc3-4079-ad59-9b08bef37bdf",
      "name": "Support Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -1728,
        688
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "d13a3a99-da2e-41a4-9601-63fcc0822c04",
      "name": "OpenAI Model - Support",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -1648,
        912
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $json.output }}",
              "rightValue": "[RESOLVED]",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "78f706b5-0441-4b27-8723-7ba39357815f",
      "name": "Issue Solved?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -1376,
        688
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "response",
              "value": "={{ $('Support Agent').item.json.output.replace('[RESOLVED]', '') }}",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "responseType",
              "value": "support_resolved",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "8be1d93d-9c7b-4cda-a03d-5ec746be4c48",
      "name": "Support Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -736,
        592
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "text": "={{ '\ud83d\udea8 Support Escalation Needed\\n\\nCustomer: ' + $('Build Context Object').item.json.customerPhone + '\\nIssue: ' + $('Support Agent').item.json.output + '\\nTime: ' + $now.toISO() }}",
        "otherOptions": {}
      },
      "id": "69e5ceb9-a7b1-4d23-803a-453a9518428a",
      "name": "Escalate to Team - Support",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        -1088,
        784
      ],
      "webhookId": "23cccbbd-260d-48b4-a28e-d19436629dd4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "response",
              "value": "Thank you for your patience. I've escalated your issue to our support team. A specialist will contact you shortly.",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "responseType",
              "value": "support_escalated",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "ac60ad38-4ce1-444e-95fc-ed16631d98aa",
      "name": "Escalation Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -736,
        784
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "pricingData",
              "value": "={ { 'basic': '$99/month', 'professional': '$299/month', 'enterprise': 'Custom pricing' } }",
              "type": "object"
            },
            {
              "id": "id-2",
              "name": "features",
              "value": "={ { 'basic': ['Feature A', 'Feature B'], 'professional': ['All Basic', 'Feature C', 'Feature D'], 'enterprise': ['All Professional', 'Custom features', 'Dedicated support'] } }",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "588dd842-f48b-4183-ae83-13e4c35b695e",
      "name": "Pull Pricing Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1088,
        1088
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Build Context Object').item.json.chatInput }}",
        "options": {
          "systemMessage": "You are a pricing specialist. Help customers understand our pricing plans, features, and value propositions. Use the pricing data provided. Be transparent and help them choose the right plan for their needs."
        }
      },
      "id": "6ea1926e-cc17-4657-9257-576b66fc01b3",
      "name": "Pricing Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -800,
        976
      ]
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "id": "42569ea5-8405-48ff-ad84-603cf988b2f5",
      "name": "OpenAI Model - Pricing",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -720,
        1200
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "text": "={{ '\ud83d\udc64 Human Agent Needed\\n\\nCustomer: ' + $('Build Context Object').item.json.customerPhone + '\\nMessage: ' + $('Build Context Object').item.json.chatInput + '\\nTime: ' + $now.toISO() }}",
        "otherOptions": {}
      },
      "id": "c3ae2189-7a9c-4462-a97a-996d70448ed6",
      "name": "Alert Team - Human Needed",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        -1088,
        1376
      ],
      "webhookId": "9bcc0ce1-bd32-4f02-8ef0-6903bb000534"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "response",
              "value": "Thank you for reaching out. I'm connecting you with one of our team members who will assist you shortly.",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "responseType",
              "value": "human_handoff",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "c2c4de93-323b-4279-ba83-fd8d3cd649a4",
      "name": "Human Handoff Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -736,
        1376
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "8da3e689-0a7d-4301-b300-d63e24b76c70",
      "name": "Log Complaint",
      "type": "n8n-nodes-base.mongoDb",
      "typeVersion": 1.2,
      "position": [
        -1376,
        1568
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "text": "={{ '\u26a0\ufe0f Customer Complaint Logged\n\nCustomer: ' + $('Build Context Object').item.json.customerPhone + '\nComplaint: ' + $('Build Context Object').item.json.chatInput + '\nTime: ' + $now.toISO() + '\nComplaint ID: ' + $('Log Complaint').item.json.id }}",
        "otherOptions": {}
      },
      "id": "7d32b57c-3560-4ca0-bbf4-9c1c7ff38252",
      "name": "Alert Team - Complaint",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        -1088,
        1568
      ],
      "webhookId": "7b64106f-6e54-48d8-94eb-7036086a19a8"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "response",
              "value": "Thank you for bringing this to our attention. We've logged your complaint and our team will review it promptly. You'll receive a follow-up within 24 hours.",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "responseType",
              "value": "complaint_logged",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "timestamp",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            },
            {
              "id": "id-4",
              "name": "complaintId",
              "value": "={{ $('Log Complaint').item.json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "a4028608-8eea-4029-bd57-8cada98ce755",
      "name": "Complaint Acknowledgment",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -736,
        1568
      ]
    },
    {
      "parameters": {
        "numberInputs": 6
      },
      "id": "dea9280a-a515-4620-b943-336e2a656a08",
      "name": "Merge All Responses",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -448,
        720
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v17.0/YOUR_PHONE_NUMBER_ID/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ { 'messaging_product': 'whatsapp', 'to': $('Build Context Object').item.json.customerPhone, 'text': { 'body': $json.response } } }}",
        "options": {}
      },
      "id": "3e7d0888-d02d-4978-bc2a-a3928eff074d",
      "name": "Send WhatsApp Response",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -224,
        784
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "7580cc67-8852-4297-a3a4-06723ea0f065",
      "name": "Store Conversation Log",
      "type": "n8n-nodes-base.mongoDb",
      "typeVersion": 1.2,
      "position": [
        0,
        784
      ]
    },
    {
      "parameters": {
        "content": "Webhook Entry Point\n\nReceives incoming WhatsApp messages via webhook",
        "color": 4
      },
      "id": "d644da52-33f2-46ef-92e1-c1db0fa9bbbc",
      "name": "Webhook Entry Point",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -384,
        1184
      ]
    },
    {
      "parameters": {
        "content": "Context Preparation\n\nFetches customer history from MongoDB and builds context object for AI agents",
        "height": 180,
        "width": 280,
        "color": 4
      },
      "id": "c4185a34-c024-4f5b-a27b-068a921a0e41",
      "name": "Context Preparation",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2128,
        224
      ]
    },
    {
      "parameters": {
        "content": "Intent Classification\n\nAI Agent analyzes user message and classifies intent into:\n- FAQ\n- Booking\n- Support\n- Complaint\n- Pricing\n- Human Needed",
        "height": 300,
        "width": 320,
        "color": 5
      },
      "id": "dfb52a53-2477-48ea-829d-e16855b85d04",
      "name": "Intent Classification",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        32,
        1216
      ]
    },
    {
      "parameters": {
        "content": "FAQ Handler\n\nAnswers frequently asked questions using AI agent with knowledge base",
        "width": 280,
        "color": 4
      },
      "id": "d4009317-001a-4a81-b0af-d0b3860ccbaf",
      "name": "FAQ Handler",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2800,
        464
      ]
    },
    {
      "parameters": {
        "content": "Booking Flow\n\nChecks Google Calendar availability and uses AI agent to handle booking requests",
        "height": 180,
        "width": 300,
        "color": 4
      },
      "id": "6394659c-baa1-44e3-adf9-1107b4fee168",
      "name": "Booking Flow",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        640,
        816
      ]
    },
    {
      "parameters": {
        "content": "Support Flow\n\nAI agent handles support requests\nChecks if issue is resolved\nEscalates to team via Slack if needed",
        "height": 200,
        "width": 300,
        "color": 4
      },
      "id": "fe1bcd81-a083-4e39-8f90-c8a16998cda2",
      "name": "Support Flow",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -80,
        176
      ]
    },
    {
      "parameters": {
        "content": "Pricing Flow\n\nPulls pricing data and uses AI agent to answer pricing questions",
        "width": 280,
        "color": 5
      },
      "id": "3c8397c3-e014-468d-a884-26f185f62697",
      "name": "Pricing Flow",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2480,
        192
      ]
    },
    {
      "parameters": {
        "content": "Complaint Handling\n\nLogs complaint to MongoDB\nAlerts team via Slack\nSends acknowledgment to customer",
        "height": 180,
        "width": 300,
        "color": 4
      },
      "id": "9093822f-1ddf-4823-b1bb-8202031e5a99",
      "name": "Complaint Handling",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        400,
        128
      ]
    },
    {
      "parameters": {
        "content": "Human Handoff\n\nAlerts team via Slack when AI cannot handle the request\nProvides handoff response to customer",
        "height": 180,
        "width": 300,
        "color": 4
      },
      "id": "e20119d0-6efb-43f2-a145-3795e50d523b",
      "name": "Human Handoff",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2640,
        1296
      ]
    },
    {
      "parameters": {
        "content": "Response Handling\n\nMerges all responses from different flows\nSends WhatsApp response\nStores conversation log in MongoDB",
        "height": 200,
        "width": 320
      },
      "id": "26b21668-cf3e-4b30-a5e7-0a44c3b0d4b2",
      "name": "Response Handling",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -416,
        368
      ]
    },
    {
      "parameters": {
        "content": "Shared Memory\n\nConversation Memory node connected to all AI agents\nMaintains context across the entire conversation\nEnables follow-up questions and continuity",
        "height": 200,
        "width": 320,
        "color": 4
      },
      "id": "19f52069-2259-4629-8248-932e35c20146",
      "name": "Shared Memory",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        608,
        1568
      ]
    }
  ],
  "connections": {
    "WhatsApp Webhook": {
      "main": [
        [
          {
            "node": "Fetch Customer History",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Customer History": {
      "main": [
        [
          {
            "node": "Build Context Object",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Context Object": {
      "main": [
        [
          {
            "node": "Intent Classifier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Intent Classifier": {
      "main": [
        [
          {
            "node": "Route by Intent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model - Classifier": {
      "ai_languageModel": [
        [
          {
            "node": "Intent Classifier",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Conversation Memory": {
      "ai_memory": [
        [
          {
            "node": "Intent Classifier",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "FAQ Agent",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Booking Agent",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Support Agent",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Pricing Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Intent Classifier",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Route by Intent": {
      "main": [
        [
          {
            "node": "FAQ Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Check Calendar Availability",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Support Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Log Complaint",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pull Pricing Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Alert Team - Human Needed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FAQ Agent": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model - FAQ": {
      "ai_languageModel": [
        [
          {
            "node": "FAQ Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Check Calendar Availability": {
      "main": [
        [
          {
            "node": "Booking Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Booking Agent": {
      "main": [
        [
          {
            "node": "Format Booking Confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model - Booking": {
      "ai_languageModel": [
        [
          {
            "node": "Booking Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Format Booking Confirmation": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Support Agent": {
      "main": [
        [
          {
            "node": "Issue Solved?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model - Support": {
      "ai_languageModel": [
        [
          {
            "node": "Support Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Issue Solved?": {
      "main": [
        [
          {
            "node": "Support Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Escalate to Team - Support",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Support Response": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Escalate to Team - Support": {
      "main": [
        [
          {
            "node": "Escalation Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Escalation Response": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Pull Pricing Data": {
      "main": [
        [
          {
            "node": "Pricing Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pricing Agent": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "OpenAI Model - Pricing": {
      "ai_languageModel": [
        [
          {
            "node": "Pricing Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Alert Team - Human Needed": {
      "main": [
        [
          {
            "node": "Human Handoff Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Human Handoff Response": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 4
          }
        ]
      ]
    },
    "Log Complaint": {
      "main": [
        [
          {
            "node": "Alert Team - Complaint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Alert Team - Complaint": {
      "main": [
        [
          {
            "node": "Complaint Acknowledgment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Complaint Acknowledgment": {
      "main": [
        [
          {
            "node": "Merge All Responses",
            "type": "main",
            "index": 5
          }
        ]
      ]
    },
    "Merge All Responses": {
      "main": [
        [
          {
            "node": "Send WhatsApp Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send WhatsApp Response": {
      "main": [
        [
          {
            "node": "Store Conversation Log",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "3f914498-1690-4845-93ea-3a9f8670e633",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2026-01-07T19:10:51.396Z",
      "createdAt": "2026-01-07T19:10:51.396Z",
      "role": "workflow:owner",
      "workflowId": "ZMwPg8lbbl6VRCZ5",
      "projectId": "DT8YjHwLZsQjJqVc"
    }
  ],
  "activeVersion": null,
  "tags": []
}